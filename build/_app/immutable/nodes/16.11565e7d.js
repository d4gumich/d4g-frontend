import{S as Oe,i as Be,s as Re,a as A,y as U,k as R,K as $e,h as k,c as I,z as H,l as $,m as Y,n as M,b as B,A as V,d as w,f as x,g as d,B as j,J as de,o as he,Z as Ue,v as ee,N as He,O as Ve,P as je,w as _e,_ as ge,q as oe,e as be,r as ne,C as Ne,D as E,$ as pe,L as fe,a0 as we,u as Ae,V as We,E as ue}from"../chunks/index.d9340d54.js";import{N as qe,a as Ge,D as me,B as Ye,S as Ke,T as Je,M as ae,b as ye,I as ke}from"../chunks/navbar.58d40ee9.js";import{s as De}from"../chunks/collapsible.9d8ec21a.js";import{_ as Xe,f as Ze,H as Qe,T as xe,C as Ie,E as et,a as tt,F as ot,b as nt,P as rt,L as at,d as lt}from"../chunks/text_carousel.a31e3b85.js";import{w as ve}from"../chunks/index.e3a3bec3.js";import{B as Fe}from"../chunks/button.64a6d6f5.js";import{H as st}from"../chunks/hangul2 copy 2.d69bf722.js";const{document:ce}=Ue;function it(l){let e,t,o,m;const s=[l[5]];let n={};for(let i=0;i<s.length;i+=1)n=He(n,s[i]);return e=new Qe({props:n}),o=new Fe({props:{text:"Go back",click:l[27],styleAdjustment:"margin: 2rem 0;"}}),{c(){U(e.$$.fragment),t=A(),U(o.$$.fragment)},l(i){H(e.$$.fragment,i),t=I(i),H(o.$$.fragment,i)},m(i,c){V(e,i,c),B(i,t,c),V(o,i,c),m=!0},p(i,c){const S=c[0]&32?Ve(s,[je(i[5])]):{};e.$set(S)},i(i){m||(d(e.$$.fragment,i),d(o.$$.fragment,i),m=!0)},o(i){w(e.$$.fragment,i),w(o.$$.fragment,i),m=!1},d(i){j(e,i),i&&k(t),j(o,i)}}}function ut(l){let e,t,o,m,s,n,i,c,S,_,r,u,f,p,b,F,T,z,L,O,K,J;function te(a){l[24](a)}let X={analyzing:l[2],width:l[4]};l[1]!==void 0&&(X.version=l[1]),u=new xe({props:X}),_e.push(()=>ge(u,"version",te));let y=l[7]&&Pe(l),D=l[10]&&Ee(l);const le=[mt,ft],W=[];function se(a,g){return a[2]?0:1}T=se(l),z=W[T]=le[T](l);let v=!l[2]&&Te(l),P=l[8]&&Me(l);return{c(){e=R("div"),t=R("img"),m=A(),s=R("div"),n=R("h1"),i=oe("Analyze a PDF to find relevant meta and content details"),c=A(),S=R("p"),_=oe("Welcome to Hangul"),r=A(),U(u.$$.fragment),p=A(),y&&y.c(),b=A(),D&&D.c(),F=A(),z.c(),L=A(),v&&v.c(),O=A(),P&&P.c(),K=be(),this.h()},l(a){e=$(a,"DIV",{class:!0});var g=Y(e);t=$(g,"IMG",{src:!0,alt:!0,class:!0}),m=I(g),s=$(g,"DIV",{class:!0});var N=Y(s);n=$(N,"H1",{class:!0});var Q=Y(n);i=ne(Q,"Analyze a PDF to find relevant meta and content details"),Q.forEach(k),c=I(N),S=$(N,"P",{class:!0});var ie=Y(S);_=ne(ie,"Welcome to Hangul"),ie.forEach(k),r=I(N),H(u.$$.fragment,N),N.forEach(k),g.forEach(k),p=I(a),y&&y.l(a),b=I(a),D&&D.l(a),F=I(a),z.l(a),L=I(a),v&&v.l(a),O=I(a),P&&P.l(a),K=be(),this.h()},h(){Ne(t.src,o=st)||M(t,"src",o),M(t,"alt","Hangul Logo"),M(t,"class","hangul-logo svelte-16hb961"),M(n,"class","text-container-heading svelte-16hb961"),M(S,"class","text svelte-16hb961"),M(s,"class","text-container svelte-16hb961"),M(e,"class","content-container svelte-16hb961")},m(a,g){B(a,e,g),E(e,t),E(e,m),E(e,s),E(s,n),E(n,i),E(s,c),E(s,S),E(S,_),E(s,r),V(u,s,null),B(a,p,g),y&&y.m(a,g),B(a,b,g),D&&D.m(a,g),B(a,F,g),W[T].m(a,g),B(a,L,g),v&&v.m(a,g),B(a,O,g),P&&P.m(a,g),B(a,K,g),J=!0},p(a,g){const N={};g[0]&4&&(N.analyzing=a[2]),g[0]&16&&(N.width=a[4]),!f&&g[0]&2&&(f=!0,N.version=a[1],pe(()=>f=!1)),u.$set(N),a[7]?y?(y.p(a,g),g[0]&128&&d(y,1)):(y=Pe(a),y.c(),d(y,1),y.m(b.parentNode,b)):y&&(ee(),w(y,1,1,()=>{y=null}),x()),a[10]?D?(D.p(a,g),g[0]&1024&&d(D,1)):(D=Ee(a),D.c(),d(D,1),D.m(F.parentNode,F)):D&&(ee(),w(D,1,1,()=>{D=null}),x());let Q=T;T=se(a),T===Q?W[T].p(a,g):(ee(),w(W[Q],1,1,()=>{W[Q]=null}),x(),z=W[T],z?z.p(a,g):(z=W[T]=le[T](a),z.c()),d(z,1),z.m(L.parentNode,L)),a[2]?v&&(ee(),w(v,1,1,()=>{v=null}),x()):v?(v.p(a,g),g[0]&4&&d(v,1)):(v=Te(a),v.c(),d(v,1),v.m(O.parentNode,O)),a[8]?P?(P.p(a,g),g[0]&256&&d(P,1)):(P=Me(a),P.c(),d(P,1),P.m(K.parentNode,K)):P&&(ee(),w(P,1,1,()=>{P=null}),x())},i(a){J||(d(u.$$.fragment,a),d(y),d(D),d(z),d(v),d(P),J=!0)},o(a){w(u.$$.fragment,a),w(y),w(D),w(z),w(v),w(P),J=!1},d(a){a&&k(e),j(u),a&&k(p),y&&y.d(a),a&&k(b),D&&D.d(a),a&&k(F),W[T].d(a),a&&k(L),v&&v.d(a),a&&k(O),P&&P.d(a),a&&k(K)}}}function Pe(l){let e,t;return e=new Ie({props:{estimatedTime:l[3]}}),{c(){U(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,m){V(e,o,m),t=!0},p(o,m){const s={};m[0]&8&&(s.estimatedTime=o[3]),e.$set(s)},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function Ee(l){let e,t;return e=new et({props:{updateShowErrorFromParent:l[17],errorType:l[6]}}),{c(){U(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,m){V(e,o,m),t=!0},p(o,m){const s={};m[0]&64&&(s.errorType=o[6]),e.$set(s)},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function ft(l){let e,t,o,m,s,n,i,c,S,_,r,u,f=l[11]&&Se(l);return{c(){e=R("div"),t=R("img"),m=A(),s=R("p"),n=oe(l[9]),i=A(),c=R("input"),S=A(),f&&f.c(),this.h()},l(p){e=$(p,"DIV",{class:!0});var b=Y(e);t=$(b,"IMG",{src:!0,class:!0,alt:!0}),m=I(b),s=$(b,"P",{class:!0});var F=Y(s);n=ne(F,l[9]),F.forEach(k),i=I(b),c=$(b,"INPUT",{type:!0,accept:!0,id:!0,class:!0}),S=I(b),f&&f.l(b),b.forEach(k),this.h()},h(){Ne(t.src,o=rt)||M(t,"src",o),M(t,"class","pdf-icon svelte-16hb961"),M(t,"alt","PDF icon"),M(s,"class","drop-text svelte-16hb961"),M(c,"type","file"),M(c,"accept","application/pdf"),M(c,"id","file-input"),M(c,"class","svelte-16hb961"),M(e,"class","rectangle svelte-16hb961")},m(p,b){B(p,e,b),E(e,t),E(e,m),E(e,s),E(s,n),E(e,i),E(e,c),E(e,S),f&&f.m(e,null),_=!0,r||(u=[fe(c,"change",l[19]),fe(e,"drop",we(l[19])),fe(e,"dragover",we(l[18]))],r=!0)},p(p,b){(!_||b[0]&512)&&Ae(n,p[9]),p[11]?f?(f.p(p,b),b[0]&2048&&d(f,1)):(f=Se(p),f.c(),d(f,1),f.m(e,null)):f&&(ee(),w(f,1,1,()=>{f=null}),x())},i(p){_||(d(f),_=!0)},o(p){w(f),_=!1},d(p){p&&k(e),f&&f.d(),r=!1,We(u)}}}function mt(l){let e,t,o,m,s,n,i,c;const S=[_t,ct],_=[];function r(u,f){return u[14]>0||u[13]?0:1}return t=r(l),o=_[t]=S[t](l),s=new at({props:{progress:l[0]/l[3]*100}}),{c(){e=R("div"),o.c(),m=A(),U(s.$$.fragment),n=A(),i=R("div"),this.h()},l(u){e=$(u,"DIV",{class:!0});var f=Y(e);o.l(f),m=I(f),H(s.$$.fragment,f),n=I(f),i=$(f,"DIV",{style:!0}),Y(i).forEach(k),f.forEach(k),this.h()},h(){M(i,"style","margin: 0 0 3rem 0;"),M(e,"class","loading-icon svelte-16hb961")},m(u,f){B(u,e,f),_[t].m(e,null),E(e,m),V(s,e,null),E(e,n),E(e,i),c=!0},p(u,f){let p=t;t=r(u),t===p?_[t].p(u,f):(ee(),w(_[p],1,1,()=>{_[p]=null}),x(),o=_[t],o?o.p(u,f):(o=_[t]=S[t](u),o.c()),d(o,1),o.m(e,m));const b={};f[0]&9&&(b.progress=u[0]/u[3]*100),s.$set(b)},i(u){c||(d(o),d(s.$$.fragment,u),c=!0)},o(u){w(o),w(s.$$.fragment,u),c=!1},d(u){u&&k(e),_[t].d(),j(s)}}}function Se(l){let e,t;return e=new Fe({props:{text:"Analyze PDF",click:l[20],styleAdjustment:"margin-top: 1rem;"}}),{c(){U(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,m){V(e,o,m),t=!0},p:ue,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function ct(l){let e,t;return e=new lt({}),{c(){U(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,m){V(e,o,m),t=!0},p:ue,i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function _t(l){let e,t,o,m;return{c(){e=R("p"),t=oe("estimated "),o=oe(l[14]),m=oe(" seconds remaining"),this.h()},l(s){e=$(s,"P",{class:!0});var n=Y(e);t=ne(n,"estimated "),o=ne(n,l[14]),m=ne(n," seconds remaining"),n.forEach(k),this.h()},h(){M(e,"class","analyzing-text svelte-16hb961")},m(s,n){B(s,e,n),E(e,t),E(e,o),E(e,m)},p(s,n){n[0]&16384&&Ae(o,s[14])},i:ue,o:ue,d(s){s&&k(e)}}}function Te(l){let e,t,o;function m(n){l[25](n)}let s={width:l[4]};return l[8]!==void 0&&(s.showModal=l[8]),e=new tt({props:s}),_e.push(()=>ge(e,"showModal",m)),{c(){U(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,i){V(e,n,i),o=!0},p(n,i){const c={};i[0]&16&&(c.width=n[4]),!t&&i[0]&256&&(t=!0,c.showModal=n[8],pe(()=>t=!1)),e.$set(c)},i(n){o||(d(e.$$.fragment,n),o=!0)},o(n){w(e.$$.fragment,n),o=!1},d(n){j(e,n)}}}function Me(l){let e,t,o;function m(n){l[26](n)}let s={};return l[8]!==void 0&&(s.showModal=l[8]),e=new ot({props:s}),_e.push(()=>ge(e,"showModal",m)),{c(){U(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,i){V(e,n,i),o=!0},p(n,i){const c={};!t&&i[0]&256&&(t=!0,c.showModal=n[8],pe(()=>t=!1)),e.$set(c)},i(n){o||(d(e.$$.fragment,n),o=!0)},o(n){w(e.$$.fragment,n),o=!1},d(n){j(e,n)}}}function gt(l){let e,t,o,m,s,n,i,c;ce.title=e="Hangul "+l[1]+".0",o=new qe({props:{currentPage:pt}});const S=[ut,it],_=[];function r(u,f){return u[12]?1:0}return n=r(l),i=_[n]=S[n](l),{c(){t=A(),U(o.$$.fragment),m=A(),s=R("div"),i.c(),this.h()},l(u){$e("svelte-1cttykq",ce.head).forEach(k),t=I(u),H(o.$$.fragment,u),m=I(u),s=$(u,"DIV",{class:!0});var p=Y(s);i.l(p),p.forEach(k),this.h()},h(){M(s,"class","container svelte-16hb961")},m(u,f){B(u,t,f),V(o,u,f),B(u,m,f),B(u,s,f),_[n].m(s,null),c=!0},p(u,f){(!c||f[0]&2)&&e!==(e="Hangul "+u[1]+".0")&&(ce.title=e);let p=n;n=r(u),n===p?_[n].p(u,f):(ee(),w(_[p],1,1,()=>{_[p]=null}),x(),i=_[n],i?i.p(u,f):(i=_[n]=S[n](u),i.c()),d(i,1),i.m(s,null))},i(u){c||(d(o.$$.fragment,u),d(i),c=!0)},o(u){w(o.$$.fragment,u),w(i),c=!1},d(u){u&&k(t),j(o,u),u&&k(m),u&&k(s),_[n].d()}}}const pt="hangul";let dt=!0;function ht(l,e,t){let o,m,s,n;const i=ve(0);de(l,i,h=>t(23,n=h));const c=ve(0);de(l,c,h=>t(22,s=h)),Xe.workerSrc=Ge;let S,_,r,u,f,p=!1,b,F=!1,T=0,z=!0,L=2,O=me,K="N/A",J=!1,te=!1,X=!1,y=!1,D=!1;const le=h=>{t(10,J=h),N(!1)};async function W(h){return new Promise((q,G)=>{const Z=new FileReader;Z.onload=async function(C){const Ce=await nt(new Uint8Array(C.target.result)).promise;q({page_count_:Ce.numPages,size_:h.size})},Z.onerror=function(C){G(C.target.error)},Z.readAsArrayBuffer(h)})}const se=()=>{const h=setInterval(()=>{t(0,T+=ke*ae),(T>=o||!X)&&(console.log("main interval cleared"),clearInterval(h))},ke)},v=h=>{h.preventDefault()};he(()=>{typeof window<"u"&&t(4,S=window.screen.width)});async function P(){return t(7,p=!0),b=await new Promise(h=>{const q=new Ie({target:document.body,props:{estimatedTime:o}});q.$on("confirm",G=>{h(G.detail),t(7,p=!1),q.$destroy()})}),b}async function a(h){if(h.preventDefault(),t(9,O=me),h.dataTransfer?_=h.dataTransfer.files[0]:_=h.target.files[0],_)if(_.type==="application/pdf"){t(11,te=!0),t(9,O=_.name);try{W(_).then(({page_count_:q,size_:G})=>{i.set(q),c.set((G*Ye).toFixed(2))}),K=O.replace(/\.pdf$/,"")}catch(q){console.error("Error loading PDF:",q)}}else console.log("Error: file is NOT a PDF"),t(9,O="Please submit a PDF"),t(6,f=0),t(10,J=!0),t(11,te=!1)}async function g(){let h;if(h=await P(),h){t(2,X=!0);const q=Date.now();try{t(5,r=await Ze(_,L,o*Ke+Je)),r!==null&&console.log("Result:",r),t(5,r.verbose=dt,r),t(5,r.hangul_time=Math.round((Date.now()-q)*ae*100)/100,r),t(5,r.fileName=K,r),t(5,r.version=L,r),t(5,r.document_size=s,r),T<o&&(t(0,T=o),t(13,D=!0),console.log("completing loading bar animation"),await De(500)),z=!1,t(12,y=!0),t(13,D=!1)}catch(G){console.error("Could not fetch from d4gumsi.pythonanywhere.com",G),N(!0),t(6,f=1),t(10,J=!0);const Z={to_name:"Szymon",file_name:r.fileName,fail_stage:"main API call",page_number:r.metadata["No.of Pages"],version:r.version,timestamp:new Date(Date.now()),first_duration:r.hangul_time,second_duration:"N/A",document_language:r.document_language.language,document_title:r.document_title,document_author:r.document_author,document_theme:r.document_theme,report_type:r.report_type};emailjs.send("default_service","template_8r3xfwe",Z).then(C=>{console.log("SUCCESS!",C.status,C.text)},C=>{console.log("FAILED...",C)})}if(t(0,T=0),t(2,X=!1),y&&L===2){console.log("fetching summary data"),t(5,r.fetchingSummaryData=!0,r),t(5,r.estimatedTimeToAnalyzeSummary=r.hangul_time*1.5,r);const G=Date.now();try{console.log(`waiting ${ye*ae} seconds to call summary data`),await De(ye),console.log("fetching summary data"),u=await fetchSummary(r.document_summary_parameters,L),console.log("Document Summary:",u),t(5,r.summary_generation_time=Math.round((Date.now()-G)*ae*100)/100,r),t(5,r.document_summary=u,r);const Z={file_name:r.fileName,page_number:r.metadata["No.of Pages"],version:r.version,timestamp:new Date(Date.now()),first_duration:r.hangul_time,second_duration:r.summary_generation_time,document_language:r.document_language.language,document_title:r.document_title,document_author:r.document_author,document_theme:r.document_theme,report_type:r.report_type,summary:r.document_summary};emailjs.send("default_service","template_x5kz5cs",Z).then(C=>{console.log("SUCCESS!",C.status,C.text)},C=>{console.log("FAILED...",C)})}catch(Z){console.error("Could not fetch summary data",Z),t(5,r.summary_generation_time=-1,r),t(5,r.document_summary=null,r);const C={file_name:r.fileName,fail_stage:"summary",page_number:r.metadata["No.of Pages"],version:r.version,timestamp:new Date(Date.now()),first_duration:r.hangul_time,second_duration:Math.round((Date.now()-G)*ae*100)/100,document_language:r.document_language.language,document_title:r.document_title,document_author:r.document_author,document_theme:r.document_theme,report_type:r.report_type};emailjs.send("default_service","template_8r3xfwe",C).then(re=>{console.log("SUCCESS Sending a summary fail!",re.status,re.text)},re=>{console.log("FAILED...",re)})}t(5,r.fetchingSummaryData=!1,r)}}else N(!0)}const N=h=>{t(2,X=!1),t(12,y=!1),z=!0,t(0,T=0),t(9,O=h?O:me),t(11,te=h)};function Q(h){L=h,t(1,L)}function ie(h){F=h,t(8,F)}function ze(h){F=h,t(8,F)}const Le=()=>N(!1);return l.$$.update=()=>{l.$$.dirty[0]&4194304&&console.log("Size of file: ",s,"MB"),l.$$.dirty[0]&8388608&&console.log("Number of pages: ",n),l.$$.dirty[0]&8&&console.log("Estimated Time (s):",o),l.$$.dirty[0]&9&&t(14,m=Math.round(o-T)),l.$$.dirty[0]&2&&console.log("version:",L),l.$$.dirty[0]&4&&X&&he(se())},t(3,o=60),[T,L,X,o,S,r,f,p,F,O,J,te,y,D,m,i,c,le,v,a,g,N,s,n,Q,ie,ze,Le]}class Et extends Oe{constructor(e){super(),Be(this,e,ht,gt,Re,{},null,[-1,-1])}}export{Et as component};
